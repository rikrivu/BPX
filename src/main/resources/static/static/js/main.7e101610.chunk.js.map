{"version":3,"sources":["Components/Loader/Loader.tsx","GlobalStore/GlobalStore.tsx","Components/RadioButtonGroup/RadioButtonGroup.tsx","utils/appConstants.ts","Components/AgGridTable/CellRenderers/DefaultCellRenderer/DefaultCellRenderer.tsx","services/data-service.ts","utils/commonMethods.ts","Components/CustomTooltip/CustomTooltip.tsx","Components/AgGridTable/CellRenderers/URLRenderer/URLRenderer.tsx","Components/AgGridTable/CellRenderers/NavigationRenderer/NavigationRenderer.tsx","Components/Modal/ModalContext.tsx","Components/Modal/UseModalHook.tsx","Components/Modal/Modal.tsx","assets/excel-icon.png","assets/json-icon.png","Components/FileViewerModal/FileViewerModal.tsx","assets/pdf-icon.png","assets/docx-icon.png","Components/AgGridTable/CellRenderers/ModalRenderer/ModalRenderer.tsx","Components/AgGridTable/agGridTableMethod.ts","Components/AgGridTable/CustomHeader/CustomHeader.tsx","Components/AgGridTable/AgGridTableConstants.ts","Components/AgGridTable/AgGridTable.tsx","Components/AgGridTable/stickyHeaderHook.tsx","Views/FacilityTable/FacilityTable.tsx","Components/ExcelViewer/excelFileMapping.ts","AzureBLOBStorageConnection/services/BlobDownloadsViewState.ts","AzureBLOBStorageConnection/services/BlobSharedViewState.ts","AzureBLOBStorageConnection/contexts/viewStateContext.ts","AzureBLOBStorageConnection/services/BlobStorageService.ts","Components/NotifierPopIn/NotifierPopIn.tsx","Components/CustomTable/CustomTable.tsx","Components/CustomTable/useStickyHeader.tsx","Components/ExcelViewer/ExcelViewer.tsx","Views/Home/Home.tsx","Views/PDFViewer/PDFViewer.tsx","Views/PermitTable/PermitTable.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Loader","className","CircularProgress","initialState","isLoading","tableLoading","showNotifier","show","type","globalStore","createContext","Provider","GlobalStateProvider","children","useReducer","state","actions","newState","forEach","action","data","dispatch","value","RadioButtonGroup","props","options","length","onChange","handleRadioButtonToggle","map","option","id","name","defaultChecked","selected","htmlFor","radioButtonOptions","DefaultCellRenderer","params","facilityAbortController","AbortController","fileListAbortController","getFacility","permitType","sortFilterState","a","abort","fetch","API_ENDPOINT","page","criteria","signal","res","json","getPermits","facilityId","getPDF","permitId","getPDFByFileName","fileName","getFileList","createTableStateForSort","tableData","updatedTableData","notifyMessageWithLoading","setTimeout","CustomTooltip","withStyles","theme","tooltip","backgroundColor","palette","common","white","color","boxShadow","shadows","fontSize","Tooltip","URLRenderer","useContext","downloadableFileName","title","onClick","then","console","log","headers","get","replace","blob","Blob","fileURL","URL","createObjectURL","window","open","url","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","catch","err","NavigationRenderer","ModalContext","useModal","useState","isModalActive","setIsModalActive","modalContent","setModalContent","toggleModal","content","Modal","modalElement","showClearModal","ReactDOM","createPortal","querySelector","ModalProvider","FileViewerModal","fileList","setFileList","globalState","useEffect","applicationNumber","index","includes","src","alt","jsonLogo","excelLogo","openPDFByName","ModalConsumer","ModalRenderer","getCellRenderer","config","columnType","CustomHeader","wideColumns","frameworkComponents","agColumnHeader","sort","column","colId","displayName","sortable","sortState","defaultCellRenderer","urlRenderer","navigationRenderer","modalRenderer","AgGridTable","headerElementRef","useRef","bodyElementRef","stickyRef","originalStyles","position","top","zIndex","current","header","style","onScroll","useCallback","shouldStick","shouldUnstick","getBoundingClientRect","height","width","original","addEventListener","removeEventListener","useStickyHeader","gridApi","setGridApi","tableWidth","onGridReady","api","onFirstDataRendered","sizeColumnsToFit","rowData","domLayout","animateRows","rowHeight","headerHeight","groupHeaderHeight","rowClassRules","node","rowIndex","Object","keys","colDefConfig","key","columnProps","headerName","columnName","cellClass","headerClass","subKey","headerComponentParams","field","cellRenderer","suppressSizeToFit","FacilityTable","pageSize","search","undefined","setTableData","prev","columns","facilities","totalPages","excelFileMapping","actionColumnNameKeywords","BlobDownloadsViewStateService","blobStorage","blobState","downloadQueueInner$","Subject","downloadedItems$","this","downloadQueue$","pipe","mergeMap","filename","downloadFile","getStorageOptionsWithContainer","switchMap","downloadBlobItem","getDownloadUrlFromResponse","mapDownloadResponse","source","containerName","startWith","from","blobBody","Promise","resolve","asObservable","next","BlobSharedViewStateService","selectedContainerInner$","BehaviorSubject","containers$","getContainers","getStorageOptions","itemsInContainer$","selectedContainer$","filter","listBlobsInContainer","finaliseBlobChange","finalize","scanEntries","item","scan","items","values","storageUri","storageAccessToken","buildConnectionString","request","blobServiceClient","buildClient","asyncToObservable","listContainers","containerClient","getContainerClient","listBlobsFlat","blockBlobClient","getBlockBlobClient","download","delete","file","uploadFile","BlobServiceClient","fromConnectionString","Observable","observer","uploadBrowserData","onProgress","blobHTTPHeaders","blobContentType","onUploadComplete","onUploadError","distinctUntilChanged","error","size","complete","progress","loadedBytes","iterable","closed","sharedViewState","downloadsViewState","SharedViewStateContext","DownloadsViewStateContext","NotifierPopIn","renderHeader","tableName","iHeader","CustomTable","defaultSticky","isSticky","setIsSticky","tableRef","handleScrollCallback","bottom","handleScroll","ref","rows","row","iRow","cell","iCell","actionableColumnIndexes","setFileToDownload","createActionableColumnIndexes","cols","reduce","actionColIndexes","col","isColActionable","i","push","ExcelViewer","downloadsContext","setData","reader","FileReader","onload","evt","bstr","target","result","workBook","XLSX","workSheetName","SheetNames","workSheet","Sheets","sheet_to_json","modifiedCols","camelCase","trim","newText","test","toUpperCase","camelCaseToTitleCase","readAsBinaryString","sub","subscribe","split","pop","unsubscribe","truncatedName","JSON","parse","sessionStorage","getItem","blobList","find","downloadItem","setFileToDownloadName","Home","context","sharedContext","setPermitType","getContainerItems","blobData","date","Date","toDateString","setItem","stringify","event","PDFViewer","useParams","pdfData","setPdfData","data-type","PermitTable","permits","to","App","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","getElementById"],"mappings":"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","file":"static/js/main.7e101610.chunk.js","sourcesContent":["import './Loader.scss';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nfunction Loader () {\r\n    return <div className=\"loader-wrapper\"><CircularProgress/></div>;\r\n}\r\n\r\nexport default Loader;","import React, { Context, createContext, Dispatch, useReducer } from \"react\";\r\n\r\nexport interface GlobalStoreState {\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface GlobalStoreAction {\r\n  type: string;\r\n  data: any;\r\n}\r\n\r\nconst initialState: GlobalStoreState = {\r\n  isLoading: false,\r\n  tableLoading: true,\r\n  showNotifier: {\r\n    show: 'initial',\r\n    type: null\r\n  }\r\n};\r\nconst globalStore: Context<GlobalStoreState> = createContext<GlobalStoreState>(initialState);\r\n// console.log('GlobalStore', GlobalStore);\r\nconst Provider: React.Provider<GlobalStoreState> = globalStore.Provider;\r\n\r\nconst GlobalStateProvider = ( { children } : any ) => {\r\n    \r\n    const [state, dispatch]: [GlobalStoreState, Dispatch<GlobalStoreAction[]>]\r\n    = useReducer<(state: GlobalStoreState, actions: GlobalStoreAction[]) => GlobalStoreState>\r\n    (\r\n      (state: GlobalStoreState, actions: GlobalStoreAction[]) => {\r\n  \r\n      const newState: GlobalStoreState = {...state};\r\n      actions.forEach(action => {\r\n        newState[action.type] = action.data;\r\n      })\r\n        // console.log('Actions', action, state, newState);\r\n      return newState;\r\n  \r\n    }, initialState);\r\n  \r\n    return <Provider value={{ state, dispatch }}>{children}</Provider>;\r\n  };\r\n  \r\nexport { globalStore, GlobalStateProvider }","import './RadioButtonGroup.scss';\r\nimport { RadioButtonComponentProps, RadioButtonOption } from './RadioButtonGroupModels';\r\n\r\nfunction RadioButtonGroup (props: RadioButtonComponentProps) {\r\n    \r\n    return (\r\n        props.options.length ?\r\n        <div onChange={props.handleRadioButtonToggle} className=\"radio-btn-wrapper\">\r\n\r\n            {\r\n                props.options.map((option: RadioButtonOption) => (\r\n                    <div key={option.id}>\r\n                        <input\r\n                            id={option.id}\r\n                            type=\"radio\"\r\n                            className=\"radio-input\"\r\n                            name=\"permit\"\r\n                            value={option.name}\r\n                            defaultChecked={props.selected === option.name}\r\n                        />\r\n                        <label htmlFor={option.id}>{option.name}</label>\r\n                    </div>\r\n                ))\r\n            }\r\n        \r\n        </div>\r\n        : <div>No Option to show for Radio Group</div>\r\n    );\r\n}\r\n\r\nexport default RadioButtonGroup;","import { RadioButtonOption } from '../Components/RadioButtonGroup/RadioButtonGroupModels';\r\n\r\n// export const API_ENDPOINT: string = 'http://localhost:8085/api/';\r\nexport const API_ENDPOINT: string = '/api/';\r\n// export const PAGE_SIZE: number = 30;\r\nexport const PAGE_SIZE: number = 1500;\r\n\r\nexport const storageAccessToken: string = '?sv=2020-02-10&ss=b&srt=sco&sp=rwdlacx&se=2021-10-26T16:48:00Z&st=2021-03-26T08:48:00Z&spr=https&sig=%2FLc1Wdf5BfR1I9rrDNlja0EJ1zBGCF7yn7vXNW1xC%2Bg%3D';\r\nexport const storageUri: string = 'https://bridgei2i.blob.core.windows.net/?sv=2020-02-10&ss=b&srt=sco&sp=rwdlacx&se=2021-10-26T16:48:00Z&st=2021-03-26T08:48:00Z&spr=https&sig=%2FLc1Wdf5BfR1I9rrDNlja0EJ1zBGCF7yn7vXNW1xC%2Bg%3D';\r\nexport const blobStorageContainerName: string = 'bpx-permits';\r\nexport const DATE_RANGE_CHECK: number = 60 * 60 * 24 * 1000;  // 1day in milliseconds\r\n\r\nexport const radioButtonOptions: RadioButtonOption[] = [\r\n    {\r\n        name: 'Air Permit',\r\n        id: 'Air_Permit'\r\n    },\r\n    {\r\n        name: 'Storm Water Permit',\r\n        id: 'Storm_Water_Permit'\r\n    },\r\n    {\r\n        name: 'Injection Well Permit',\r\n        id: 'Injection_Well_Permit'\r\n    },\r\n    {\r\n        name: 'Water Wells/Reservoirs Permits',\r\n        id: 'Water_Reservoir_Permit'\r\n    },\r\n    {\r\n        name: 'EPA Class V Cathodic Protection',\r\n        id: 'EPA_Class_V_Cathodic_Protection'\r\n    },\r\n    {\r\n        name: 'North & South Evap. Ponds',\r\n        id: 'North_&_South_Evap._Ponds'\r\n    }\r\n]","import { GroupCellRendererParams } from \"ag-grid-community/dist/lib/rendering/cellRenderers/groupCellRenderer\";\r\n\r\nfunction DefaultCellRenderer (params: GroupCellRendererParams) {\r\n    // console.log('DefaultCellRenderParams', params);\r\n    return <div>{params.value ? params.value : '---'}</div>;\r\n}\r\n\r\nexport default DefaultCellRenderer;","import { SortFilterState } from \"../Components/AgGridTable/agGridModels\";\r\nimport { API_ENDPOINT, PAGE_SIZE } from \"../utils/appConstants\"\r\nimport { FacilityAPIResponse } from \"../Views/FacilityTable/FacilityTableModels\";\r\nimport { PermitAPIResponse } from \"../Views/PermitTable/PermitTableModels\";\r\n\r\nlet facilityAbortController: AbortController = new AbortController();\r\nlet fileListAbortController: AbortController = new AbortController();\r\n\r\nexport const getFacility = async (permitType: string, sortFilterState: SortFilterState): Promise<FacilityAPIResponse> => {\r\n    facilityAbortController.abort();\r\n    facilityAbortController = new AbortController();\r\n    const res = await fetch(\r\n        API_ENDPOINT +\r\n        // 'facility?' +\r\n        'facilities?' +\r\n        'page=' + sortFilterState.page +\r\n        '&size=' + PAGE_SIZE +\r\n        '&sortBy=' + sortFilterState.criteria +\r\n        '&order=' + sortFilterState.state +\r\n        '&filter=' + permitType,\r\n        {signal: facilityAbortController.signal}\r\n    );\r\n    return await res.json();\r\n}\r\n\r\nexport const getPermits = async (facilityId: string, sortFilterState: SortFilterState): Promise<PermitAPIResponse> => {\r\n    const res = await fetch(\r\n        API_ENDPOINT + 'permit?' +\r\n        'sortBy=' + sortFilterState.criteria +\r\n        '&order=' + sortFilterState.state + \r\n        '&facilityId=' + facilityId\r\n    )\r\n    return await res.json();\r\n}\r\n\r\nexport const getPDF = async (facilityId: string, permitId: string): Promise<any> => {\r\n    const res = await fetch(API_ENDPOINT + 'download/permit?facilityId=' + facilityId + '&permitId=' + permitId);\r\n    // console.log('PDF Res', res.headers.get('Content-Disposition'));\r\n    return res;\r\n}\r\n\r\nexport const getPDFByFileName = async (fileName: string): Promise<any> => {\r\n    const res = await fetch(API_ENDPOINT + 'download/application?fileName=' + fileName);\r\n    return res;\r\n}\r\n\r\nexport const getFileList = async (facilityId: string): Promise<string[]> => {\r\n    fileListAbortController.abort();\r\n    fileListAbortController = new AbortController();\r\n    const res = await fetch(API_ENDPOINT + 'list/file?facilityId=' + facilityId, {signal: fileListAbortController.signal});\r\n    return await res.json();\r\n}","import { GlobalStoreAction } from \"../GlobalStore/GlobalStore\";\r\nimport { FacilityTableState } from \"../Views/FacilityTable/FacilityTableModels\";\r\nimport { PermitTableState } from \"../Views/PermitTable/PermitTableModels\";\r\n\r\nexport const createTableStateForSort =\r\n(criteria: string, tableData: (FacilityTableState | PermitTableState)): (FacilityTableState | PermitTableState) => {\r\n    \r\n    const updatedTableData: (FacilityTableState | PermitTableState) = {\r\n        ...tableData,\r\n        sortFilterState: {\r\n            ...tableData.sortFilterState,\r\n            criteria: criteria\r\n        }\r\n    };\r\n    if (tableData.sortFilterState.criteria === criteria) {\r\n        switch (tableData.sortFilterState.state) {\r\n            case 'ASC': {\r\n                updatedTableData.sortFilterState.state = 'DESC';\r\n                break;\r\n            }\r\n            case 'DESC': {\r\n                updatedTableData.sortFilterState.state = 'ASC';\r\n                break;\r\n            }\r\n        }\r\n    } else {\r\n        updatedTableData.sortFilterState.state = 'DESC';\r\n    }\r\n    // console.log('createTableStateForSort', updatedTableData);\r\n    return updatedTableData;\r\n}\r\n\r\nexport const notifyMessageWithLoading = (dispatch: (actions: GlobalStoreAction[]) => void, type: 'success' | 'fail'): void => {\r\n    dispatch([\r\n        {type: 'isLoading', data: false},\r\n        {\r\n            type: 'showNotifier', data: {\r\n                show: 'start',\r\n                type: type\r\n            }\r\n        }\r\n    ]);\r\n\r\n    setTimeout(() => {\r\n        dispatch([{\r\n            type: 'showNotifier', data: {\r\n                show: 'end',\r\n                type: type\r\n            }\r\n        }]);\r\n    }, 3000)\r\n}\r\n\r\nexport const notifyMessage = (dispatch: (actions: GlobalStoreAction[]) => void, type: 'success' | 'fail'): void => {\r\n    dispatch([\r\n        {\r\n            type: 'showNotifier', data: {\r\n                show: 'start',\r\n                type: type\r\n            }\r\n        }\r\n    ]);\r\n\r\n    setTimeout(() => {\r\n        dispatch([{\r\n            type: 'showNotifier', data: {\r\n                show: 'end',\r\n                type: type\r\n            }\r\n        }]);\r\n    }, 3000)\r\n}\r\n\r\nexport const downloadFile = (fileName: string, url: string): void => {\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.setAttribute(\r\n      'download', fileName\r\n    );\r\n\r\n    // Append to html link element page\r\n    document.body.appendChild(link);\r\n\r\n    // Start download\r\n    link.click();\r\n\r\n    // Clean up and remove the link\r\n    link.parentNode?.removeChild(link);\r\n}\r\n\r\nexport const camelCaseToTitleCase = (camelCase: string): string =>{\r\n    if (camelCase == null || camelCase === \"\") {\r\n      return camelCase;\r\n    }\r\n\r\n    camelCase = camelCase.trim();\r\n    let newText = \"\";\r\n    for (let i = 0; i < camelCase.length; i++) {\r\n      if (/[A-Z]/.test(camelCase[i])\r\n          && i !== 0\r\n          && /[a-z]/.test(camelCase[i-1])) {\r\n        newText += \" \";\r\n      }\r\n      if (i === 0 && /[a-z]/.test(camelCase[i]))\r\n      {\r\n        newText += camelCase[i].toUpperCase();\r\n      } else {\r\n        newText += camelCase[i];\r\n      }\r\n    }\r\n\r\n    return newText;\r\n  }\r\n\r\nexport const checkDateDifference = (checkDate: string, differenceToCheck: number): boolean => {\r\n    return (new Date().getTime() - new Date(checkDate).getTime()) > differenceToCheck;\r\n}","import { withStyles, Tooltip, Theme } from \"@material-ui/core\";\r\n\r\nconst CustomTooltip = withStyles((theme: Theme) => ({\r\n    tooltip: {\r\n        backgroundColor: theme.palette.common.white,\r\n        color: 'rgba(0, 0, 0, 0.87)',\r\n        boxShadow: theme.shadows[1],\r\n        fontSize: 11,\r\n    },\r\n}))(Tooltip);\r\n\r\nexport default CustomTooltip;","import { GroupCellRendererParams } from \"ag-grid-community/dist/lib/rendering/cellRenderers/groupCellRenderer\";\r\nimport { useContext } from \"react\";\r\nimport { GlobalStoreState, globalStore } from \"../../../../GlobalStore/GlobalStore\";\r\nimport { getPDF } from \"../../../../services/data-service\";\r\nimport { notifyMessageWithLoading } from \"../../../../utils/commonMethods\";\r\nimport CustomTooltip from \"../../../CustomTooltip/CustomTooltip\";\r\n\r\nfunction URLRenderer (params: GroupCellRendererParams) {\r\n\r\n    const globalState: GlobalStoreState = useContext<GlobalStoreState>(globalStore);\r\n    const { dispatch } = globalState;\r\n\r\n    let downloadableFileName: string = '';\r\n\r\n    const openPDF = (facilityId: string, permitId: string): void => {\r\n\r\n        dispatch([{type: 'isLoading', data: true}]);\r\n        \r\n        getPDF(facilityId, permitId).then(res => {\r\n            console.log('res from URLRenderer', res);\r\n            downloadableFileName = res.headers.get('Content-Disposition').replace('attachment; filename=: ', '');\r\n            return res.blob();\r\n        }).then(res => {\r\n            // console.log('PDF', res);\r\n            if (res.type === 'application/pdf') {\r\n                const blob = new Blob([res], {type: 'application/pdf'});\r\n                const fileURL = URL.createObjectURL(blob);\r\n                window.open(fileURL);\r\n            } else {\r\n                const url = URL.createObjectURL(new Blob([res]));\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.setAttribute(\r\n                  'download', downloadableFileName\r\n                );\r\n            \r\n                // Append to html link element page\r\n                document.body.appendChild(link);\r\n            \r\n                // Start download\r\n                link.click();\r\n            \r\n                // Clean up and remove the link\r\n                link.parentNode?.removeChild(link);\r\n            }\r\n\r\n            dispatch([{type: 'isLoading', data: false}]);\r\n        })\r\n        .catch(err => {\r\n            console.log('Unable to retrieve file', err);\r\n            \r\n            notifyMessageWithLoading(dispatch, 'fail');\r\n        })\r\n    }\r\n\r\n    // console.log('url renderer params', params);\r\n    return params.data.facilityId && params.value ?\r\n    <CustomTooltip title=\"Open Permit\">\r\n        <button type=\"button\" className=\"link-btn no-truncate\" onClick={() => openPDF(params.data.facilityId, params.value)}>\r\n            {params.value}\r\n        </button>\r\n    </CustomTooltip>\r\n    : (params.value ? params.value : '---');\r\n}\r\n\r\nexport default URLRenderer;","import { GroupCellRendererParams } from \"ag-grid-community/dist/lib/rendering/cellRenderers/groupCellRenderer\";\r\nimport CustomTooltip from \"../../../CustomTooltip/CustomTooltip\";\r\n\r\nfunction NavigationRenderer (params: GroupCellRendererParams) {\r\n    return params.value ?\r\n    <div>\r\n        <CustomTooltip title=\"View Permits for this Facility\">\r\n            <a href={`permits/${params.value}`}>{params.value}</a>\r\n        </CustomTooltip>\r\n    </div>\r\n    : '---'\r\n}\r\n\r\nexport default NavigationRenderer;","import { Context, createContext } from 'react';\r\nimport useModal from './UseModalHook';\r\nimport Modal from './Modal';\r\n\r\nimport { ModalProviderProp, UseModal } from './models';\r\n\r\nlet ModalContext: Context<UseModal>;\r\nconst { Provider }: Context<UseModal> = (ModalContext = createContext<UseModal | null>(null) as Context<UseModal>);\r\n\r\nconst ModalProvider = ({ children, showClearModal = true }: ModalProviderProp): JSX.Element => {\r\n  \r\n    // console.log('ModalCOntext Invoked');\r\n  \r\n  const { isModalActive, toggleModal, modalContent }: UseModal = useModal();\r\n\r\n  return (\r\n    <Provider value={{ isModalActive, toggleModal, modalContent }}>\r\n      <Modal showClearModal={showClearModal}/>\r\n      {children}\r\n    </Provider>\r\n  );\r\n};\r\n\r\nexport { ModalContext, ModalProvider };\r\n","import { useState } from 'react';\r\nimport { UseModal } from './models';\r\n\r\nexport const useModal = (): UseModal => {\r\n  \r\n  const [isModalActive, setIsModalActive] = useState<boolean>(false);\r\n  const [modalContent, setModalContent] = useState<string | boolean>('I\\'m the Modal Content');\r\n\r\n//   console.log('Usemodal Called');\r\n\r\n  const toggleModal = (content = false): void => {\r\n\r\n    // console.log('toggleModal', content);\r\n\r\n    setIsModalActive(!isModalActive);\r\n    if (content) {\r\n      setModalContent(content);\r\n    }\r\n  };\r\n\r\n  return { isModalActive, toggleModal, modalContent };\r\n};\r\n\r\nexport default useModal;\r\n","import './Modal.scss';\r\nimport { ReactPortal, useContext } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n// Local Imports\r\nimport { ModalContext } from './ModalContext';\r\n\r\n// Import Models\r\nimport { UseModal } from './models';\r\n\r\n// 3rd Party Libraries\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nconst Modal = (props: {showClearModal: boolean}): (ReactPortal | null) => {\r\n\r\n  const { modalContent, toggleModal, isModalActive }: UseModal = useContext<UseModal>(ModalContext) as UseModal;\r\n\r\n  // console.log('Modal', isModalActive);\r\n\r\n  const modalElement: JSX.Element = (\r\n    <div className=\"modal-container\">\r\n      <div>\r\n\r\n        {\r\n          props.showClearModal ?\r\n          <div className=\"modal-clear-container\">\r\n            <button type=\"button\" className=\"modal-clear-button\" onClick={() => toggleModal()}>\r\n              <ClearIcon/>\r\n            </button>\r\n          </div>\r\n          : null\r\n        }\r\n\r\n        {modalContent}\r\n      \r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return isModalActive ? ReactDOM.createPortal(modalElement, document.querySelector('#modal-root')!) : null;\r\n};\r\n\r\nexport default Modal;\r\n","export default __webpack_public_path__ + \"static/media/excel-icon.8217b42c.png\";","export default __webpack_public_path__ + \"static/media/json-icon.a60aa82b.png\";","import './FileViewerModal.scss';\r\nimport { Dispatch, SetStateAction, useContext, useEffect, useState } from \"react\";\r\nimport { getFileList, getPDFByFileName } from \"../../services/data-service\";\r\nimport pdfLogo from '../../assets/pdf-icon.png';\r\nimport docxLogo from '../../assets/docx-icon.png';\r\nimport excelLogo from '../../assets/excel-icon.png';\r\nimport jsonLogo from '../../assets/json-icon.png';\r\n\r\nimport CustomTooltip from '../CustomTooltip/CustomTooltip';\r\n\r\n// 3rd Party Libraries\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { ModalContext } from '../Modal/ModalContext';\r\n\r\nimport { UseModal } from '../Modal/models';\r\nimport { GlobalStoreState, globalStore } from '../../GlobalStore/GlobalStore';\r\nimport { notifyMessageWithLoading } from '../../utils/commonMethods';\r\n\r\nfunction FileViewerModal (props: {\r\n    applicationNumber: string,\r\n    facilityId: string\r\n}) {\r\n\r\n    const [fileList, setFileList]: [string[], Dispatch<SetStateAction<string[]>>] = useState<string[]>([]);\r\n    const { toggleModal }: UseModal = useContext<UseModal>(ModalContext) as UseModal;\r\n\r\n    const globalState: GlobalStoreState = useContext<GlobalStoreState>(globalStore);\r\n    const { dispatch } = globalState;\r\n\r\n    let downloadableFileName: string = '';\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch([{type: 'isLoading', data: true}]);\r\n\r\n        setFileList([]);\r\n        getFileList(props.facilityId).then((res: string[]) => {\r\n            setFileList([...res]);\r\n            dispatch([{type: 'isLoading', data: false}]);\r\n        }).catch(err => {\r\n            console.log('Some error Occured', err);\r\n            dispatch([{type: 'isLoading', data: false}]);\r\n        })\r\n\r\n    }, [dispatch, props.facilityId])\r\n\r\n    const openPDFByName = (fileName: string): void => {\r\n\r\n        dispatch([{type: 'isLoading', data: true}]);\r\n        \r\n        getPDFByFileName(fileName).then(res => {\r\n            // console.log('res from URLRenderer', res);\r\n            downloadableFileName = res.headers.get('Content-Disposition').replace('attachment; filename=: ', '');\r\n            return res.blob();\r\n        }).then(res => {\r\n            // console.log('PDF', res);\r\n            if (res.type === 'application/pdf') {\r\n                const blob = new Blob([res], {type: 'application/pdf'});\r\n                const fileURL = URL.createObjectURL(blob);\r\n                window.open(fileURL);\r\n            } else {\r\n                const url = URL.createObjectURL(new Blob([res]));\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.setAttribute(\r\n                  'download', downloadableFileName\r\n                );\r\n            \r\n                // Append to html link element page\r\n                document.body.appendChild(link);\r\n            \r\n                // Start download\r\n                link.click();\r\n            \r\n                // Clean up and remove the link\r\n                link.parentNode?.removeChild(link);\r\n            }\r\n\r\n            dispatch([{type: 'isLoading', data: false}]);\r\n        })\r\n        .catch(err => {\r\n            console.log('Unable to retrieve file', err);\r\n            \r\n            notifyMessageWithLoading(dispatch, 'fail');\r\n        })\r\n    }\r\n    \r\n    return (\r\n        <div className=\"file-view-container\">\r\n            <div>\r\n                <div className=\"modal-header\">\r\n                    <div>Files for {props.applicationNumber}</div>\r\n                    <CustomTooltip title=\"Close\">\r\n                        <button type=\"button\" className=\"modal-clear-button\" onClick={() => toggleModal()}>\r\n                            <ClearIcon/>\r\n                        </button>\r\n                    </CustomTooltip>\r\n                </div>\r\n\r\n                <div className=\"modal-body app-scroll\">\r\n                    {\r\n                        !globalState.state.isLoading ?\r\n                        fileList.length ?\r\n                        fileList.map((fileName: string, index: number) => (\r\n                            <div key={index} className=\"pdf-link\">\r\n\r\n                                {\r\n                                    fileName.includes('.pdf') ? <img src={pdfLogo} alt=\"pdf-icon.png\"/>\r\n                                    : fileName.includes('.docx') ? <img src={docxLogo} alt=\"docx-icon.png\"/>\r\n                                    : fileName.includes('.json') ? <img src={jsonLogo} alt=\"json-icon.png\"/>\r\n                                    : fileName.includes('.xl') ? <img src={excelLogo} alt=\"excel-icon.png\"/>\r\n                                    : <img src=\"\" alt=\".\"/>\r\n                                }\r\n                                \r\n                                <CustomTooltip\r\n                                    title={fileName.includes('pdf') ? 'Open PDF in new Tab' : 'Download File'}\r\n                                >\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"link-btn\"\r\n                                        onClick={() => openPDFByName(fileName)}\r\n                                    >\r\n                                        {fileName}\r\n                                    </button>\r\n                                </CustomTooltip>\r\n                            </div>\r\n                        ))\r\n                        : <div>Unable tor retreive any file for this Application number.</div>\r\n                        : null\r\n                    }\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileViewerModal;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAZCAYAAADTyxWqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH1SURBVHgBpZVBbtNQEIZn3nNoVCmVo4S92SFKkFmguqu6JyjcoD1BwwlKTtDkBMAJYk6Q7EjZYGhZ4x0S0NobwKH4DfMeRIrT1qmdT7Lm+Vn6PfP+8Ri/Pnng1oT1kpBcuC2IIa6J3eY4THL7sdcZnW9vdm+r893r7F9sdeKL7UfvY9+1558JAnDWUQ2hBIgQEKk3NFWjeUEBFWlNzl4sClYS09VcJ2hBSWQqA6pnRzGfGRAZA4jIpTQblhZrhsbBe9+8h/5sDxUOhIDj0mIz7k7OxrN17LkOQQaFYp99x96YNo70WqzJ3pW+WqDQgEbaeCoUOPpS08t9WEJhZgjgK6QP5obQhiUUZsYtMEbAHcEXKQxhFbH25PQVBz5c8OW6HMMqYiY7UgMdL3/8dlYWEyj2kCCwLDma763rKDTgi3fflJgh7VqEiQQcceeHfJg2u5MogNettx/7SzPTPVbHO4d6LQmH/MnYRPj8X1QJxwRJ7RVmpkXsdOOQflGXB6bNbz9onxgjZvTPtza7XPoOKqt3o5ieulYqhwQq4qQjBAr/O5qjdfJJl9Zf3M+VWZPy2PQWihA4Ky6wByXIiWUKBsjjRIFCrMvHzUkYQQlyZbbfnQYcAqhI5bF9k1j0k2rPYBVMi1CExkEp9d/JgaoghfjHOvgLjITb6sxwDOYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAe1BMVEUAAAAhHh4gHBzy8fErV5gpVZgpVZgpVZgoVJkpVZgoVZolO1+PjIwnRXX///8pVZiXl5elo6RoZmfK1eZdf7GTqcx4lL5DaaRQdKvy9Pmgs9Nribfl6/Ouvtm6yt88YJjX3+w1X55YcphFZpiPkpd8h5d0gpdgdpeFnsRG668zAAAADnRSTlMAZkDpL++/r39vP5bYslFH3mcAAASFSURBVHja7NdLTsNAEEXRAOGb0I7DbwJC4rv/HZJBLIWO7W5LgarUu3cF9c6oe0ZERERERERERJWd2HQ681LlwXEFag8OK7A5Jf13bbv0I2AD0J65ETACSG4ErADcCFgBuBEwA/AiYAfgRMAQwIeAJYALAVMADwK2AA4EjAHsBcwBJgoEBJgmEBFgkkBIgCkCMQEmCAQFqBeICmAgMAaw+tvW63VyI+AGoFIgMECdQGSAKoHQADUCsQEqBIIDlAWiAxQFwgOUBYK+BLtKAgIA4wIKAKMCEgBjAhoAIwIiAMMCKgCDAjIAQwI6AAMCQgD9AkoAvQJSAL0C4T9DBQExgH0BNYA9ATmAXEAPIBMQBPgtEAVgrDZvuTmyu1cSoAVgFyDAS3ByAAAAQHcvAAAAAAAAAAAAwFF/hgoBAAAAALgH+Pj8+n57f22aValgAN3wbToA2XAdgGy4CkBKz3cvD4/3T02xVNfRvASz4ToA2XAdgPlicbszXAdgfnN9dXlx3s3QAciG6wBkw/UAmm0AAAAAAAAcruP5DDXbAAAAAAAAAAAAAA4UL0EAUk8AAAAAAAAA8MOuueRGCANB9AYGyR/ANgjvuP8JIw39Y+JdVilcGzK9q0fzcEYzAAwAA8AbAMzzy/8ZmucBYAAYAIAAtEB5BYB1c58cOkqOoqNIk4AHYHF3Th1lR1ll5GkCuAHTJt20LSXJqBIlRAD+1+12nPw92qdO/vtJkB/vIlZwHM+jQIMLEUBxdyIPLsfZvrUYEAGQBXW9dydZvrZkQgRAFtR9P52k0Oi4P56YANiCnTrxyWTHBMD7vbDwNMez4YUJgC0Y2IGa+nwvrJgA2IJRnndNeyCaMAGwBbMc+jTBPiQeFcBtQerX7g+0B5d9MWZUAHSDN+tA2vrdEkqoAPic15SGJzGctuAK+X2AkXxQB2YWg7Uk5hci9jWvRky89kGfCo8LgMpGvdsriyGpIzIugKy3mOQnf2R9CRRcAGTBqg6UVfC6IAsuALaglI16PJK/NtBvha0FA5ct9r432gVkAHLSWam1qq/wSyAiA8jcMem2F55d4kDUk6BY8CAS3hx/PNNZkAHQ5p/qQHFfpdk2IQPgCnQtVgytfi4HNgC24H1ZrBjYgdgAqOxj25OduYANIDkT/xBDvS8NG8DqTGKnV52wATw6FBGD5kAHYMsuIgZNRAdgym49MQR0AKas74mhoQMwZWOn2In7I6nfZUNHDDs+AC3bOmK48AFI2doTQ8AHIGWPnhiAfygpZas4UCMOfAGAPpXwSUlvBfCG3woPAH8OxklwABgABoAB4Ie9OzgBGISCKNhBsIP032UOYsDgRUhAs7MVyJz8pwcAAAAAAAAAmJ1jCEApAAAAAAAAQCzAMVjUT/AYDAAAAAAAAFgLID61FR9bk9sTXPwkubnPMTQXXT1zAeru3nAuQF1seLk8Fpze7hccX+8XnN8fDMAPAVYbAAAA2nsBAAAAAAAAAAAAAAAAAAAAAC8AbLL2XgAArvbggAQAAABA0P/X0Q8VAAAAABaPMFYsMqbIsgAAAABJRU5ErkJggg==\"","import { GroupCellRendererParams } from \"ag-grid-community/dist/lib/rendering/cellRenderers/groupCellRenderer\";\r\nimport { useContext } from \"react\";\r\nimport { ModalContext, ModalProvider } from \"../../../Modal/ModalContext\";\r\nimport { UseModal } from \"../../../Modal/models\";\r\nimport FileViewerModal from '../../../FileViewerModal/FileViewerModal';\r\nimport CustomTooltip from \"../../../CustomTooltip/CustomTooltip\";\r\n\r\nfunction ModalConsumer (params: GroupCellRendererParams) {\r\n\r\n    const { toggleModal }: UseModal = useContext<UseModal>(ModalContext) as UseModal;\r\n\r\n    // console.log('ModalRenderer params', params);\r\n\r\n    const openModal = (): void => {\r\n        toggleModal(\r\n            <FileViewerModal\r\n                applicationNumber={params.value}\r\n                facilityId={params.data.facilityId}\r\n            />\r\n        )\r\n    }\r\n    \r\n    return params.value ?\r\n    <CustomTooltip title=\"View All Files\">\r\n        <button type=\"button\" className=\"modal-open-link\" onClick={() => openModal()}>\r\n            {params.value}\r\n        </button>\r\n    </CustomTooltip>\r\n    : <div>---</div>\r\n}\r\n\r\nfunction ModalRenderer (params: GroupCellRendererParams) {\r\n    return (\r\n        <ModalProvider showClearModal={false}>\r\n            <ModalConsumer {...params}/>\r\n        </ModalProvider>\r\n    );\r\n}\r\n\r\nexport default ModalRenderer;","import { ColumnDefConfigObject } from \"./agGridModels\";\r\n\r\nexport const getCellRenderer = (config: ColumnDefConfigObject | undefined): string => {\r\n    \r\n    if (config) {\r\n        switch (config.columnType) {\r\n            case 'url': {\r\n                return 'urlRenderer';\r\n            }\r\n            case 'navigate': {\r\n                return 'navigationRenderer';\r\n            }\r\n            case 'modal': {\r\n                return 'modalRenderer';\r\n            }\r\n            case 'string': case 'number': default: {\r\n                return 'defaultCellRenderer';\r\n            }\r\n        }\r\n    } else {\r\n        return 'defaultCellRenderer';\r\n    }\r\n}","import './CustomHeader.scss';\r\n\r\n// 3rd Party Libraries\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport CustomTooltip from '../../CustomTooltip/CustomTooltip';\r\n\r\nfunction CustomHeader (props: any) {\r\n    // console.log('Props Custom Header', props);\r\n    return (\r\n        <button type=\"button\" className=\"header-btn\" onClick={() => {props.sort(props.column.colId)}}>\r\n            <div>{props.displayName}</div>\r\n            {\r\n                props.sortable ?\r\n                <CustomTooltip title={\r\n                    (props.sortState.criteria === props.column.colId && props.sortState.state === 'DESC')  ?\r\n                    'Sort Ascending' : 'Sort Descending'\r\n                }>\r\n                    <div className=\"sort-icons\">\r\n                        {\r\n                            props.sortState.criteria !== props.column.colId ?\r\n                            <ArrowDropDownIcon className=\"sortIcon\"/>\r\n                            : null\r\n                        }\r\n                        {\r\n                            props.sortState.criteria === props.column.colId && props.sortState.state === 'DESC' ?\r\n                            <ArrowDropUpIcon className=\"sortIcon\"/>\r\n                            : null\r\n                        }\r\n                        {\r\n                            props.sortState.criteria === props.column.colId &&  props.sortState.state === 'ASC' ?\r\n                            <ArrowDropDownIcon className=\"sortIcon\"/>\r\n                            : null\r\n                        }\r\n                    </div>\r\n                </CustomTooltip>\r\n                : null\r\n            }\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default CustomHeader;","export const wideColumns: string[] = [\r\n    'facilityName',\r\n    'companyName',\r\n    // 'legacyPermitNumber',\r\n    'reason',\r\n    'description',\r\n    'finalPermitWaiverDocument'\r\n]","import { AgGridColumn, AgGridColumnGroupProps, AgGridColumnProps, AgGridReact } from 'ag-grid-react';\r\n\r\nimport 'ag-grid-community/dist/styles/ag-grid.css';\r\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\r\nimport { useState } from 'react';\r\nimport { GridApi, GridReadyEvent } from 'ag-grid-community';\r\nimport { ColumnDefConfig, DefaultTableState } from './agGridModels';\r\nimport DefaultCellRenderer from './CellRenderers/DefaultCellRenderer/DefaultCellRenderer';\r\nimport URLRenderer from './CellRenderers/URLRenderer/URLRenderer';\r\nimport NavigationRenderer from './CellRenderers/NavigationRenderer/NavigationRenderer';\r\nimport ModalRenderer from './CellRenderers/ModalRenderer/ModalRenderer';\r\nimport { getCellRenderer } from './agGridTableMethod';\r\nimport CustomHeader from './CustomHeader/CustomHeader';\r\nimport { wideColumns } from './AgGridTableConstants';\r\nimport { useStickyHeader } from './stickyHeaderHook';\r\n\r\nconst frameworkComponents = {\r\n    agColumnHeader: CustomHeader,\r\n    defaultCellRenderer: DefaultCellRenderer,\r\n    urlRenderer: URLRenderer,\r\n    navigationRenderer: NavigationRenderer,\r\n    modalRenderer: ModalRenderer\r\n  }\r\n\r\nfunction AgGridTable (props: DefaultTableState) {\r\n\r\n    useStickyHeader();\r\n    \r\n    const [gridApi, setGridApi] = useState<GridApi>();\r\n\r\n    const onGridReady = (params: GridReadyEvent) => {\r\n        // using hooks - setGridApi/setColumnApi are returned by useState\r\n        // console.log('GridReady Params', params);\r\n        setGridApi(params.api);\r\n    }\r\n\r\n    // Resizing columns to fit available width when data is rendered for the first time\r\n    const onFirstDataRendered = (params: any): void => {\r\n        gridApi?.sizeColumnsToFit();\r\n    }\r\n\r\n    return (\r\n        <div className=\"ag-theme-alpine\" style={{ width: props.tableWidth }}>\r\n            <AgGridReact\r\n                onGridReady={onGridReady}\r\n                onFirstDataRendered={onFirstDataRendered}\r\n                rowData={props.rowData}\r\n                domLayout={'autoHeight'}\r\n                animateRows={true}\r\n                frameworkComponents={frameworkComponents}\r\n                rowHeight={props.rowHeight}\r\n                headerHeight={80}\r\n                groupHeaderHeight={50}\r\n                rowClassRules={{\r\n                    'alt-background': (params) => {\r\n                        return params.node.rowIndex % 2 !== 0;\r\n                    },\r\n                }}\r\n            >\r\n                {\r\n                    Object.keys(props.colDefConfig).map((key: keyof ColumnDefConfig) => {\r\n\r\n                        let columnProps: (AgGridColumnProps | AgGridColumnGroupProps) = {\r\n                            headerName: props.colDefConfig[key].columnName,\r\n                            // autoHeight: true,\r\n                            cellClass: 'default-cell',\r\n                            // wrapText: true\r\n                        }\r\n\r\n                        if (props.colDefConfig[key].children) {\r\n                            return (\r\n                                <AgGridColumn key={key} {...columnProps} headerClass=\"group-header\">\r\n                                    {\r\n                                        Object.keys(props.colDefConfig[key].children!).map((subKey: keyof ColumnDefConfig) => {\r\n\r\n                                            columnProps = {\r\n                                                ...columnProps,\r\n                                                headerName: props.colDefConfig[key].children?.[subKey].columnName,\r\n                                                headerComponentParams: {\r\n                                                    sortable: props.colDefConfig[key].children?.[subKey].sortable,\r\n                                                    sortState: props.sortFilterState,\r\n                                                    sort: props.sort\r\n                                                },\r\n                                                headerClass: 'default-header',\r\n                                                field: subKey as string,\r\n                                                cellRenderer: getCellRenderer(props.colDefConfig[key].children?.[subKey]),\r\n                                            };\r\n\r\n                                            if (wideColumns.includes(key as string)) {\r\n                                                // columnProps.width = 250;\r\n                                                columnProps.suppressSizeToFit = true;\r\n                                            }\r\n\r\n                                            return (\r\n                                                <AgGridColumn key={subKey} {...columnProps}/>\r\n                                            );\r\n                                        })\r\n                                    }\r\n                                </AgGridColumn>\r\n                            );\r\n                        } else {\r\n\r\n                            // console.log('Check', wideColumns, key, wideColumns.includes(key as string));\r\n                            columnProps = {\r\n                                ...columnProps,\r\n                                headerComponentParams: {\r\n                                    sortable: props.colDefConfig[key].sortable,\r\n                                    sortState: props.sortFilterState,\r\n                                    sort: props.sort\r\n                                },\r\n                                headerClass: 'default-header',\r\n                                field: key as string,\r\n                                cellRenderer: getCellRenderer(props.colDefConfig[key]),\r\n                            }\r\n\r\n                            if (wideColumns.includes(key as string)) {\r\n                                columnProps.width = 250;\r\n                                columnProps.suppressSizeToFit = true;\r\n                            }\r\n\r\n                            return (\r\n                                <AgGridColumn key={key} {...columnProps}/>\r\n                            );\r\n                        }\r\n                    })\r\n                }\r\n            </AgGridReact>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AgGridTable;","import { useCallback, useRef, useEffect } from \"react\";\r\n\r\nexport const useStickyHeader = () => {\r\n  const headerElementRef = useRef<any>();\r\n  const bodyElementRef = useRef<any>();\r\n  const stickyRef = useRef(false);\r\n  const originalStyles = useRef({ position: \"\", top: \"\", zIndex: \"\" });\r\n\r\n  useEffect(() => {\r\n    headerElementRef.current = document.querySelector('[ref=\"headerRoot\"]');\r\n    bodyElementRef.current = document.querySelector('[ref=\"eBodyViewport\"]');\r\n\r\n    const header = headerElementRef.current;\r\n\r\n    originalStyles.current.position = header.style.position;\r\n    originalStyles.current.top = header.style.top;\r\n    originalStyles.current.zIndex = header.style.zIndex;\r\n  }, []);\r\n\r\n  const onScroll = useCallback(() => {\r\n    const header = headerElementRef.current;\r\n    const body = bodyElementRef.current;\r\n    if (!header || !body) return;\r\n\r\n    let shouldStick = false;\r\n    let shouldUnstick = false;\r\n\r\n    if (!stickyRef.current) {\r\n      // console.log('shouldStickChecker', header.getBoundingClientRect().top, stickyRef.current)\r\n      shouldStick = header.getBoundingClientRect().top <= 0;\r\n      if (shouldStick) stickyRef.current = true;\r\n    } else {\r\n      shouldUnstick =\r\n        body.getBoundingClientRect().top -\r\n          header.getBoundingClientRect().height + 30>\r\n        0;\r\n        // console.log(\r\n        //   'shouldUnstickChecker', body.getBoundingClientRect().top,\r\n        //   header.getBoundingClientRect().height,\r\n        //   stickyRef.current, shouldUnstick\r\n        // )\r\n      if (shouldUnstick) stickyRef.current = false;\r\n    }\r\n\r\n    if (shouldStick) {\r\n      header.style.position = \"fixed\";\r\n      header.style.top = \"0\";\r\n      // this is optional, but if you have other contents that overlap the\r\n      // header you may want to adjust zIndex accordingly\r\n      header.style.zIndex = \"2\";\r\n      header.style.width = 'initial';\r\n    }\r\n    if (shouldUnstick) {\r\n      // console.log('iFshouldUnstick', shouldUnstick, originalStyles.current)\r\n      const original = originalStyles.current;\r\n      header.style.position = original.position;\r\n      header.style.top = original.top;\r\n      header.style.zIndex = original.zIndex;\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"scroll\", onScroll);\r\n    return () => window.removeEventListener(\"scroll\", onScroll);\r\n  });\r\n\r\n  return stickyRef;\r\n};","import React, { useContext, useEffect, useState } from \"react\";\r\nimport AgGridTable from \"../../Components/AgGridTable/AgGridTable\";\r\n// import Paginator from \"../../Components/Paginator/Paginator\";\r\n// import TextField from '@material-ui/core/TextField';\r\n// import ClearIcon from '@material-ui/icons/Clear';\r\n// import CustomTooltip from \"../../Components/CustomTooltip/CustomTooltip\";\r\n// import { SelectedPage } from \"../../Components/Paginator/paginatorModels\";\r\nimport { GlobalStoreState, globalStore } from \"../../GlobalStore/GlobalStore\";\r\nimport { getFacility } from \"../../services/data-service\";\r\nimport { createTableStateForSort } from \"../../utils/commonMethods\";\r\nimport { FacilityAPIResponse, FacilityTableState } from \"./FacilityTableModels\";\r\n\r\nfunction FacilityTable (props: {permitType: string}) {\r\n\r\n    const [tableData, setTableData]: [FacilityTableState, React.Dispatch<React.SetStateAction<FacilityTableState>>]\r\n    = useState<FacilityTableState>({\r\n        permitType: 'facility',\r\n        tableWidth: '96.6vw',\r\n        colDefConfig: {},\r\n        rowData: [],\r\n        pageSize: 0,\r\n        sortFilterState: {\r\n            criteria: 'formerCompanyFacilityName',\r\n            page: 0,\r\n            state: 'ASC',\r\n            search: ''\r\n        },\r\n        rowHeight: undefined\r\n    });\r\n\r\n    // const [searchText, setSearchText]: [(string), React.Dispatch<React.SetStateAction<string>>]\r\n    // = useState<string>('')\r\n\r\n    const globalState: GlobalStoreState = useContext<GlobalStoreState>(globalStore);\r\n    const { dispatch } = globalState;\r\n\r\n    useEffect(() => {\r\n\r\n        // dispatch([{type: 'tableLoading', data: true}])\r\n        dispatch([{type: 'isLoading', data: true}])\r\n\r\n        getFacility(props.permitType, tableData.sortFilterState).then((res: FacilityAPIResponse) => {\r\n            // console.log('Facility Res', res);\r\n            setTableData((prev: FacilityTableState) => ({\r\n                ...prev,\r\n                colDefConfig: res.columns,\r\n                rowData: [...res.facilities.content],\r\n                pageSize: res.facilities.totalPages\r\n            }));\r\n\r\n            // dispatch([{type: 'tableLoading', data: false}])\r\n            dispatch([{type: 'isLoading', data: false}])\r\n        })\r\n        .catch(err => {\r\n            console.log('Facility Err', err);\r\n\r\n            setTableData((prev: FacilityTableState) => ({\r\n                ...prev,\r\n            }))\r\n\r\n            // dispatch([{type: 'tableLoading', data: false}])\r\n            dispatch([{type: 'isLoading', data: false}])\r\n        })\r\n    }, [dispatch, props.permitType, tableData.sortFilterState])\r\n\r\n    // useEffect(() => {\r\n    //     const debouncedSearch = setTimeout(() => {\r\n    //         if ((searchText && searchText.trim().length) || searchText === '') {\r\n    //             setTableData((prev: FacilityTableState) => {\r\n    //                 if (prev.sortFilterState.search !== searchText) {\r\n    //                     return {\r\n    //                         ...prev,\r\n    //                         sortFilterState: {\r\n    //                             ...prev.sortFilterState,\r\n    //                             search: searchText\r\n    //                         }\r\n    //                     }\r\n    //                 } else {\r\n    //                     return prev;\r\n    //                 }\r\n    //             });\r\n    //         }\r\n    //     }, 500);\r\n\r\n    //     return () => clearTimeout(debouncedSearch);\r\n\r\n    // }, [searchText])\r\n\r\n    // Method to sort columns and setting sort state\r\n    const sort = (criteria: string): void => {\r\n        setTableData(createTableStateForSort(criteria, tableData) as FacilityTableState);\r\n    }\r\n\r\n    // const changePage = (selectedPage: SelectedPage): void => {\r\n    //     setTableData((prev: FacilityTableState) => {\r\n    //         return prev.sortFilterState.page !== selectedPage.selected ? {\r\n    //             ...prev,\r\n    //             sortFilterState: {\r\n    //                 ...prev.sortFilterState,\r\n    //                 page: selectedPage.selected\r\n    //             }\r\n    //         } : prev;\r\n    //     })\r\n    // }\r\n\r\n    return (\r\n        <div className=\"table-container\">\r\n            \r\n            <div className=\"table-title\">Facilities</div>\r\n\r\n            {/* <div className=\"search-input\">\r\n                <TextField\r\n                    value={searchText}\r\n                    id=\"search-facility\"\r\n                    label=\"Facility Name\"\r\n                    placeholder=\"Enter Facility Name\"\r\n                    onChange={(event) => setSearchText(event.target.value)}\r\n                />\r\n                <CustomTooltip title=\"Clear Search\">\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"modal-clear-button\"\r\n                        onClick={() => setSearchText('')}\r\n                    >\r\n                        <ClearIcon/>\r\n                    </button>\r\n                </CustomTooltip>\r\n            </div> */}\r\n\r\n            {\r\n                // globalState.state.tableLoading ?\r\n                // <AgGridSkeletonTable columnSize={14}/> :\r\n                tableData.rowData.length ?\r\n                <div>\r\n                    <AgGridTable {...tableData} sort={sort}/>\r\n                </div>\r\n                : !globalState.state.isLoading ? <div>No Facility Table Data</div> : null\r\n            }\r\n\r\n            {/* <Paginator loading={globalState.state.isLoading}\r\n                pageSize={tableData.pageSize} changePage={changePage}\r\n            /> */}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FacilityTable;","import { ExcelViewerFileConfig } from \"./ExcelViewerModels\";\r\n\r\nexport const excelFileMapping: ExcelViewerFileConfig = {\r\n    'Air Permit': 'Air_Permit',\r\n    'Storm Water Permit': 'Storm_Water_Permit',\r\n    'Injection Well Permit': 'Injection_Well_Permit',\r\n    // 'Water Reservoirs Permit': 'Water_Reservoirs_Permit',\r\n    'Water Wells/Reservoirs Permits': 'Water_Reservoirs_Permit',\r\n    'EPA Class V Cathodic Protection': 'EPA_Class_V_Cathodic_Protection',\r\n    // 'North & South Evap. Ponds': 'North_&_South_Evap._Ponds',\r\n    'North & South Evap. Ponds': 'North_&_South_Evap._Ponds_adarsh'\r\n}\r\n\r\nexport const actionColumnNameKeywords: string[] = [\r\n    'File Name',\r\n    'Facility Number'\r\n]","import { BlobDownloadResponseModel } from '@azure/storage-blob';\r\nimport { from, OperatorFunction, Subject } from 'rxjs';\r\nimport { map, mergeMap, startWith, switchMap } from 'rxjs/operators';\r\nimport { BlobContainerRequest, BlobItemDownload } from '../types/azure-storage';\r\nimport { BlobSharedViewStateService } from './BlobSharedViewState';\r\nimport { BlobStorageService } from './BlobStorageService';\r\n\r\nexport class BlobDownloadsViewStateService {\r\n  private downloadQueueInner$ = new Subject<string>();\r\n\r\n  downloadedItems$ = this.downloadQueue$.pipe(\r\n    mergeMap(filename => this.downloadFile(filename)),\r\n    // this.blobState.scanEntries()\r\n  );\r\n\r\n  get downloadQueue$() {\r\n    return this.downloadQueueInner$.asObservable();\r\n  }\r\n\r\n  constructor(\r\n    private blobStorage: BlobStorageService,\r\n    private blobState: BlobSharedViewStateService\r\n  ) {}\r\n\r\n  downloadItem(filename: string): void {\r\n    this.downloadQueueInner$.next(filename);\r\n  }\r\n\r\n  private downloadFile = (filename: string) =>\r\n    this.blobState.getStorageOptionsWithContainer().pipe(\r\n      switchMap(options =>\r\n        this.blobStorage\r\n          .downloadBlobItem({\r\n            ...options,\r\n            filename\r\n          })\r\n          .pipe(\r\n            this.getDownloadUrlFromResponse(),\r\n            this.mapDownloadResponse(filename, options)\r\n          )\r\n      )\r\n    );\r\n\r\n  private mapDownloadResponse = (\r\n    filename: string,\r\n    options: BlobContainerRequest\r\n  ): OperatorFunction<string, BlobItemDownload> => source =>\r\n    source.pipe(\r\n      map(url => ({\r\n        filename,\r\n        containerName: options.containerName,\r\n        url\r\n      })),\r\n      startWith({\r\n        filename,\r\n        containerName: options.containerName,\r\n        url: ''\r\n      })\r\n    );\r\n\r\n  private getDownloadUrlFromResponse = (): OperatorFunction<\r\n    BlobDownloadResponseModel,\r\n    string\r\n  > => source =>\r\n    source.pipe(\r\n      switchMap(res =>\r\n        from(res.blobBody ? res.blobBody : Promise.resolve({})).pipe(\r\n          map(body => window.URL.createObjectURL(body))\r\n        )\r\n      )\r\n    );\r\n}\r\n","import { BehaviorSubject, MonoTypeOperatorFunction, Observable, OperatorFunction } from 'rxjs';\r\nimport { filter, finalize, map, scan, switchMap } from 'rxjs/operators';\r\nimport { storageAccessToken, storageUri } from '../../utils/appConstants';\r\n  import {\r\n    BlobContainerRequest,\r\n    BlobItem,\r\n    BlobStorageRequest,\r\n    Dictionary\r\n  } from '../types/azure-storage';\r\n  import { BlobStorageService } from './BlobStorageService';\r\n  \r\n  export class BlobSharedViewStateService {\r\n\r\n    private selectedContainerInner$ = new BehaviorSubject<string>('');\r\n\r\n    containers$ = this.blobStorage.getContainers(this.getStorageOptions());\r\n\r\n    itemsInContainer$ = this.selectedContainer$.pipe(\r\n        filter(containerName => !!containerName),\r\n        switchMap(containerName => this.blobStorage.listBlobsInContainer({\r\n        ...this.getStorageOptions(),\r\n        containerName\r\n        }))\r\n    )\r\n  \r\n    get selectedContainer$() {\r\n      return this.selectedContainerInner$.asObservable();\r\n    }\r\n  \r\n    constructor(private blobStorage: BlobStorageService) {}\r\n  \r\n    getContainerItems(containerName: string): void {\r\n      this.selectedContainerInner$.next(containerName);\r\n    }\r\n  \r\n    finaliseBlobChange = <T>(\r\n      containerName: string\r\n    ): MonoTypeOperatorFunction<T> => source =>\r\n      source.pipe(\r\n        finalize(\r\n          () =>\r\n            this.selectedContainerInner$.value === containerName &&\r\n            this.selectedContainerInner$.next(containerName)\r\n        )\r\n      );\r\n  \r\n    scanEntries = <T extends BlobItem>(): OperatorFunction<T, T[]> => source =>\r\n      source.pipe(\r\n        map(item => ({\r\n          [`${item.containerName}-${item.filename}`]: item\r\n        })),\r\n        scan<Dictionary<T>>(\r\n          (items, item) => ({\r\n            ...items,\r\n            ...item\r\n          }),\r\n          {}\r\n        ),\r\n        map(items => Object.values(items))\r\n      );\r\n  \r\n    getStorageOptionsWithContainer(): Observable<BlobContainerRequest> {\r\n        return this.selectedContainer$.pipe(map(containerName => ({...this.getStorageOptions(), containerName})))\r\n    }\r\n  \r\n    private getStorageOptions(): BlobStorageRequest {\r\n      return {\r\n          storageUri: storageUri,\r\n          storageAccessToken: storageAccessToken\r\n      };\r\n    }\r\n  }\r\n  ","import { createContext } from 'react';\r\nimport { BlobDownloadsViewStateService } from '../services/BlobDownloadsViewState';\r\nimport { BlobSharedViewStateService } from '../services/BlobSharedViewState';\r\nimport { BlobStorageService } from '../services/BlobStorageService';\r\n\r\nconst blobStorage = new BlobStorageService();\r\nconst sharedViewState = new BlobSharedViewStateService(blobStorage);\r\nconst downloadsViewState = new BlobDownloadsViewStateService(\r\n  blobStorage,\r\n  sharedViewState\r\n);\r\n\r\nexport const SharedViewStateContext = createContext(sharedViewState);\r\nexport const DownloadsViewStateContext = createContext(downloadsViewState);\r\n","import { TransferProgressEvent } from '@azure/core-http';\r\nimport { PagedAsyncIterableIterator } from '@azure/core-paging';\r\nimport { BlobServiceClient, BlockBlobClient } from '@azure/storage-blob';\r\nimport { from, Observable, Subscriber } from 'rxjs';\r\nimport { distinctUntilChanged, scan, startWith } from 'rxjs/operators';\r\nimport {\r\n  BlobContainerRequest,\r\n  BlobFileRequest,\r\n  BlobStorageRequest\r\n} from '../types/azure-storage';\r\n\r\nexport class BlobStorageService {\r\n  getContainers(request: BlobStorageRequest) {\r\n    const blobServiceClient = this.buildClient(request);\r\n    return this.asyncToObservable(blobServiceClient.listContainers());\r\n  }\r\n\r\n  listBlobsInContainer(request: BlobContainerRequest) {\r\n    const containerClient = this.getContainerClient(request);\r\n    return this.asyncToObservable(containerClient.listBlobsFlat());\r\n  }\r\n\r\n  downloadBlobItem(request: BlobFileRequest) {\r\n    const blockBlobClient = this.getBlockBlobClient(request);\r\n    return from(blockBlobClient.download());\r\n  }\r\n\r\n  deleteBlobItem(request: BlobFileRequest) {\r\n    const blockBlobClient = this.getBlockBlobClient(request);\r\n    return from(blockBlobClient.delete());\r\n  }\r\n\r\n  uploadToBlobStorage(file: File, request: BlobFileRequest) {\r\n    const blockBlobClient = this.getBlockBlobClient(request);\r\n    return this.uploadFile(blockBlobClient, file);\r\n  }\r\n\r\n  private getBlockBlobClient(request: BlobFileRequest) {\r\n    const containerClient = this.getContainerClient(request);\r\n    return containerClient.getBlockBlobClient(request.filename);\r\n  }\r\n\r\n  private getContainerClient(request: BlobContainerRequest) {\r\n    const blobServiceClient = this.buildClient(request);\r\n    return blobServiceClient.getContainerClient(request.containerName);\r\n  }\r\n\r\n  private buildClient(options: BlobStorageRequest) {\r\n    return BlobServiceClient.fromConnectionString(\r\n      this.buildConnectionString(options)\r\n    );\r\n  }\r\n\r\n  private uploadFile(blockBlobClient: BlockBlobClient, file: File) {\r\n    return new Observable<number>(observer => {\r\n      blockBlobClient\r\n        .uploadBrowserData(file, {\r\n          onProgress: this.onProgress(observer),\r\n          blobHTTPHeaders: {\r\n            blobContentType: file.type\r\n          }\r\n        })\r\n        .then(\r\n          this.onUploadComplete(observer, file),\r\n          this.onUploadError(observer)\r\n        );\r\n    }).pipe(distinctUntilChanged());\r\n  }\r\n\r\n  private onUploadError(observer: Subscriber<number>) {\r\n    return (error: any) => observer.error(error);\r\n  }\r\n\r\n  private onUploadComplete(observer: Subscriber<number>, file: File) {\r\n    return () => {\r\n      observer.next(file.size);\r\n      observer.complete();\r\n    };\r\n  }\r\n\r\n  private onProgress(observer: Subscriber<number>) {\r\n    return (progress: TransferProgressEvent) =>\r\n      observer.next(progress.loadedBytes);\r\n  }\r\n\r\n  private asyncToObservable<T, TService>(\r\n    iterable: PagedAsyncIterableIterator<T, TService>\r\n  ) {\r\n    return new Observable<T>(\r\n      observer =>\r\n        void (async () => {\r\n          try {\r\n            for await (const item of iterable as AsyncIterable<T>) {\r\n              if (observer.closed) return;\r\n              observer.next(item);\r\n            }\r\n            observer.complete();\r\n          } catch (e) {\r\n            observer.error(e);\r\n          }\r\n        })()\r\n    ).pipe(\r\n      scan<T, T[]>((items, item) => [...items, item], []),\r\n      startWith([] as T[])\r\n    );\r\n  }\r\n\r\n  private buildConnectionString = (options: BlobStorageRequest) => {\r\n    return (\r\n      `BlobEndpoint=${options.storageUri};` +\r\n      `SharedAccessSignature=${options.storageAccessToken}`\r\n    );\r\n  };\r\n}\r\n","import './NotifierPopIn.scss';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\r\nimport { Fragment } from 'react';\r\n\r\nfunction NotifierPopIn (props: {show: 'initial' | 'start' | 'end', type: 'success' | 'fail' | null}) {\r\n    return (\r\n        <div className={`notifier-container${\r\n                props.show === 'start' ? ' notifier-start slideIn' : props.show === 'end' ? ' notifier-end slideOut' : ''\r\n            }${\r\n                props.type === 'success' ? ' notify-success': props.type === 'fail' ? ' notify-fail' : ''\r\n            }`}\r\n        >\r\n            \r\n            {\r\n                props.type === 'success' ?\r\n                <Fragment>\r\n                    <SaveAltIcon/>File downloaded Successfully.\r\n                </Fragment>\r\n                : props.type === 'fail' ?\r\n                <Fragment>\r\n                    <ClearIcon/>File currently not available.\r\n                </Fragment>\r\n                : null\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default NotifierPopIn;","import './CustomTable.scss'\r\nimport { ExcelViewerTable } from \"../ExcelViewer/ExcelViewerModels\";\r\nimport { useStickyHeader } from \"./useStickyHeader\";\r\n\r\nconst renderHeader = (tableName: string, headers: string[]) => (\r\n    <thead>\r\n      <tr>\r\n        {headers.map((header: string, iHeader: number) => (\r\n            <th key={`${tableName}-header-${iHeader}`}>{header}</th>\r\n        ))}\r\n      </tr>\r\n    </thead>\r\n);\r\n\r\nfunction CustomTable (props: {data: ExcelViewerTable, setFileToDownload(fileName: string): void}) {\r\n\r\n    const { tableRef, isSticky } = useStickyHeader();\r\n\r\n    return (\r\n        <div>\r\n\r\n          {\r\n            isSticky && (\r\n                <table\r\n                    className=\"sticky-header\"\r\n                >\r\n                    {renderHeader(props.data.tableName, props.data.columns)}\r\n                </table>\r\n            )\r\n          }\r\n\r\n          <table ref={tableRef}>\r\n            \r\n            {renderHeader(props.data.tableName, props.data.columns)}\r\n\r\n            <tbody>\r\n              \r\n                {\r\n                    props.data.rows.map((row: string[], iRow: number) => {\r\n                        return row.length ? (\r\n                            <tr key={`${props.data.tableName}-row-${iRow}`}>\r\n                                {\r\n                                    props.data.columns.map((cell: string, iCell: number) => (\r\n                                        <td key={`${props.data.tableName}-cell-${iCell}`}>\r\n                                            {\r\n                                                row[iCell] ?\r\n                                                (\r\n                                                    props.data.actionableColumnIndexes.includes(iCell) ?\r\n                                                    <button\r\n                                                        type=\"button\"\r\n                                                        className=\"download-btn\"\r\n                                                        onClick={() => props.setFileToDownload(row[iCell])}>\r\n                                                        {row[iCell]}\r\n                                                    </button>\r\n                                                    // : cell === 'Permit Number' ? parseInt(row[iCell]).toFixed() : row[iCell]\r\n                                                    : row[iCell]\r\n                                                )\r\n                                                : null\r\n                                            }\r\n                                        </td>\r\n                                    ))\r\n                                }\r\n                            </tr>\r\n                        ) : null\r\n                    })\r\n                }\r\n\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CustomTable;","import { useState, useRef, useCallback, useEffect, SetStateAction, Dispatch } from \"react\";\r\n\r\nexport const useStickyHeader = (defaultSticky = false) => {\r\n    const [isSticky, setIsSticky]: [boolean, Dispatch<SetStateAction<boolean>>] = useState<boolean>(defaultSticky);\r\n    const tableRef = useRef<any>(null);\r\n  \r\n    const handleScrollCallback = useCallback(({ top, bottom }) => {\r\n      if (top <= 0 && bottom > 2 * 125) {\r\n        !isSticky && setIsSticky(true);\r\n      } else {\r\n        isSticky && setIsSticky(false);\r\n      }\r\n    }, [isSticky]);\r\n  \r\n    useEffect(() => {\r\n      const handleScroll = () => {\r\n        handleScrollCallback(tableRef.current.getBoundingClientRect());\r\n      };\r\n      window.addEventListener(\"scroll\", handleScroll);\r\n  \r\n      return () => {\r\n        window.removeEventListener(\"scroll\", handleScroll);\r\n      };\r\n    }, [handleScrollCallback]);\r\n  \r\n    return { tableRef, isSticky };\r\n};","import './ExcelViewer.scss';\r\nimport { Dispatch, Fragment, SetStateAction, useContext, useEffect, useState } from 'react';\r\nimport { actionColumnNameKeywords, excelFileMapping } from './excelFileMapping';\r\nimport * as XLSX from 'xlsx';\r\nimport { ExcelViewerFileConfig, ExcelViewerTable } from './ExcelViewerModels';\r\nimport { WorkBook, WorkSheet } from 'xlsx';\r\nimport { DownloadsViewStateContext } from '../../AzureBLOBStorageConnection/contexts/viewStateContext';\r\nimport { BlobDownloadsViewStateService } from '../../AzureBLOBStorageConnection/services/BlobDownloadsViewState';\r\nimport NotifierPopIn from '../../Components/NotifierPopIn/NotifierPopIn';\r\nimport { BlobItemDownload } from '../../AzureBLOBStorageConnection/types/azure-storage';\r\nimport { GlobalStoreState, globalStore } from '../../GlobalStore/GlobalStore';\r\nimport { camelCaseToTitleCase, downloadFile, notifyMessageWithLoading } from '../../utils/commonMethods';\r\nimport CustomTable from '../CustomTable/CustomTable';\r\n\r\nconst createActionableColumnIndexes = (cols: string[]): number[] => {\r\n\r\n    return  cols.reduce((actionColIndexes: number[], col: string, index: number) => {\r\n\r\n        let isColActionable: boolean = false;\r\n\r\n        for (let i = 0; i < actionColumnNameKeywords.length; i++) {\r\n            if (col.includes(actionColumnNameKeywords[i])) {\r\n                isColActionable = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (isColActionable) {\r\n            actionColIndexes.push(index);\r\n        }\r\n\r\n        return actionColIndexes;\r\n    }, [])\r\n}\r\n\r\nfunction ExcelViewer (props: {permitType: string}) {\r\n\r\n    const globalState: GlobalStoreState = useContext<GlobalStoreState>(globalStore);\r\n    const { dispatch } = globalState;\r\n    \r\n    const downloadsContext: BlobDownloadsViewStateService = useContext<BlobDownloadsViewStateService>(DownloadsViewStateContext);\r\n\r\n    const [data, setData]: [ExcelViewerTable, Dispatch<SetStateAction<ExcelViewerTable>>] = useState<ExcelViewerTable>({\r\n        tableName: '',\r\n        columns: [],\r\n        rows: [],\r\n        actionableColumnIndexes: []\r\n    });\r\n\r\n    useEffect(() => {\r\n\r\n        fetch(`./${excelFileMapping[props.permitType as keyof ExcelViewerFileConfig]}.xlsx`)\r\n        .then(res => res.blob()).then((res: Blob) => {\r\n            const file: Blob = res;\r\n            // var name = f.name;\r\n            const reader: FileReader = new FileReader();\r\n            reader.onload = (evt) => { // evt = on_file_select event\r\n                /* Parse data */\r\n                const bstr = evt?.target?.result;\r\n                const workBook: WorkBook = XLSX.read(bstr, {type:'binary'});\r\n                /* Get first worksheet */\r\n                const workSheetName: string = workBook.SheetNames[0];\r\n                const workSheet: WorkSheet = workBook.Sheets[workSheetName];\r\n                // console.log('Sheets', workBook, workSheet);\r\n                /* Convert array of arrays */\r\n                const data: unknown[] = XLSX.utils.sheet_to_json(workSheet, {header: 1} as XLSX.Sheet2JSONOpts);\r\n                /* Update state */\r\n                if (data.length >= 2) {\r\n                    const [cols, ...rows]: [string[], string[]] = data as [string[], string[]];\r\n                    const modifiedCols: string[] = cols.map((col: string) => camelCaseToTitleCase(col.replace(/\\s\\s+/g, ' ')));\r\n                    setData({\r\n                        tableName: workSheetName,\r\n                        columns: modifiedCols,\r\n                        rows: rows,\r\n                        actionableColumnIndexes: createActionableColumnIndexes(modifiedCols)\r\n                    });\r\n                    console.log(\"Data \\n\", cols, rows);\r\n                }\r\n                \r\n            }\r\n            reader.readAsBinaryString(file);\r\n        });\r\n    }, [props.permitType])\r\n\r\n    useEffect(() => {\r\n        const sub = downloadsContext.downloadedItems$\r\n        .subscribe((item: BlobItemDownload) => {\r\n            if (item.filename && item.url) {\r\n                console.log('FiletoDownload', item)\r\n                if (item.filename.includes('.pdf')) {\r\n                    window.open(item.url)\r\n                } else {\r\n                    downloadFile(\r\n                        item.filename.split('/').pop() as string,\r\n                        item.url\r\n                    ) \r\n                }\r\n                // dispatch([{type: 'isLoading', data: false}])\r\n                notifyMessageWithLoading(dispatch, 'success')\r\n            }\r\n        },\r\n        err => {\r\n            console.log('Err', err);\r\n            notifyMessageWithLoading(dispatch, 'fail');\r\n        });\r\n    \r\n        return () => sub.unsubscribe();\r\n      }, [dispatch, downloadsContext.downloadedItems$]);\r\n\r\n    const setFileToDownloadName = (truncatedName: string): void => {\r\n        dispatch([{type: 'isLoading', data: true}])\r\n        \r\n        const fileName: string = JSON.parse(sessionStorage.getItem('BlobData')!)\r\n        .blobList.find((file: string) => file.includes(truncatedName));\r\n\r\n        console.log('Found FIleName', fileName);\r\n\r\n        if (fileName) {\r\n            downloadsContext.downloadItem(fileName);\r\n        } else {\r\n            notifyMessageWithLoading(dispatch, 'fail');\r\n        }\r\n        \r\n    }\r\n\r\n    const setFileToDownload = (fileName: string) => {\r\n        setFileToDownloadName(fileName);\r\n    }\r\n\r\n    return data.columns.length && data.rows.length ?\r\n    <Fragment>\r\n        <div className=\"excel-viewer-container\">\r\n            <CustomTable data={data} setFileToDownload={setFileToDownload}/>\r\n        </div>\r\n        <NotifierPopIn {...globalState.state.showNotifier}/>\r\n    </Fragment>\r\n    : <div>No Table Data Available</div>\r\n}\r\n\r\nexport default ExcelViewer;","import './Home.scss';\r\nimport RadioButtonGroup from '../../Components/RadioButtonGroup/RadioButtonGroup';\r\nimport { blobStorageContainerName,\r\n    // DATE_RANGE_CHECK,\r\n    radioButtonOptions } from '../../utils/appConstants';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport FacilityTable from '../FacilityTable/FacilityTable';\r\nimport ExcelViewer from '../../Components/ExcelViewer/ExcelViewer';\r\nimport { SharedViewStateContext } from '../../AzureBLOBStorageConnection/contexts/viewStateContext';\r\nimport { BlobSharedViewStateService } from '../../AzureBLOBStorageConnection/services/BlobSharedViewState';\r\nimport { BlobItem } from '@azure/storage-blob';\r\nimport { BlobData } from '../../Components/ExcelViewer/ExcelViewerModels';\r\n// import { checkDateDifference } from '../../utils/commonMethods';\r\n\r\nfunction Home () {\r\n    \r\n    const context: BlobSharedViewStateService = useContext<BlobSharedViewStateService>(SharedViewStateContext);\r\n    const sharedContext = useContext(SharedViewStateContext);\r\n\r\n    const [permitType, setPermitType]: [string, React.Dispatch<React.SetStateAction<string>>]\r\n    = useState<string>(radioButtonOptions[0].name);\r\n\r\n    useEffect(() => {\r\n        // const currentBlobDataInSession: BlobData = JSON.parse(sessionStorage.getItem('BlobData') as string);\r\n\r\n        // if (!currentBlobDataInSession || checkDateDifference(currentBlobDataInSession.date, DATE_RANGE_CHECK)) {\r\n        //     console.log('currentBlobDataInSession', currentBlobDataInSession.date);\r\n        //     context.getContainerItems(blobStorageContainerName)\r\n        // }\r\n\r\n        context.getContainerItems(blobStorageContainerName)\r\n\r\n    }, [context])\r\n\r\n    useEffect(() => {\r\n        const sub = sharedContext.itemsInContainer$\r\n          .subscribe((items: BlobItem[]) => {\r\n            // console.log('Container Items', items);\r\n            const blobData: BlobData = {\r\n                date: new Date().toDateString(),\r\n                blobList: items.map((item: BlobItem) => item.name)\r\n            };\r\n            sessionStorage.setItem('BlobData', JSON.stringify(blobData));\r\n          });\r\n    \r\n        return () => sub.unsubscribe();\r\n      }, [sharedContext.itemsInContainer$])\r\n\r\n    const handleRadioButtonToggle = (event: any): void => {\r\n        // console.log('Current Selection', event.target.value);\r\n        setPermitType(event.target.value);\r\n    }\r\n    \r\n    return (\r\n        <div className='home-wrapper'>\r\n\r\n            <RadioButtonGroup\r\n                options={radioButtonOptions}\r\n                handleRadioButtonToggle={handleRadioButtonToggle}\r\n                selected={permitType}    \r\n            />\r\n\r\n            <div className=\"table-wrapper\">\r\n                {\r\n                    permitType === 'Air Permit' ?\r\n                    <FacilityTable permitType={permitType}/>\r\n                    : <ExcelViewer permitType={permitType}/>\r\n                }\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;","import { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { getPDF, getPDFByFileName } from \"../../services/data-service\";\r\n\r\nfunction PDFViewer () {\r\n\r\n    const { facilityId, permitId, fileName } = useParams<{facilityId: string, permitId: string, fileName: string}>();\r\n    // console.log('FacilityId', facilityId, permitId, permitId === '[object Response]');\r\n    const [pdfData, setPdfData] = useState<any>()\r\n\r\n    useEffect(() => {\r\n        if (facilityId && permitId) {\r\n            getPDF(facilityId, permitId)\r\n            .then(res => {\r\n                // console.log('PDF', res);\r\n                const blob = new Blob([res], {type: 'application/pdf'});\r\n                const fileURL = URL.createObjectURL(blob)\r\n                setPdfData(fileURL);\r\n            })\r\n        }\r\n\r\n        if (fileName) {\r\n            getPDFByFileName(fileName)\r\n            .then(res => {\r\n                // console.log('PDF', res);\r\n                const blob = new Blob([res], {type: 'application/pdf'});\r\n                const fileURL = URL.createObjectURL(blob)\r\n                setPdfData(fileURL);\r\n            })\r\n        }\r\n\r\n    }, [facilityId, fileName, permitId])\r\n\r\n    return pdfData ? (\r\n        <div>\r\n            <iframe\r\n                style={{ width: \"99.6vw\", height: \"98.7vh\" }}\r\n                src={pdfData}\r\n                data-type='application/pdf'\r\n                title='title'\r\n            />\r\n        </div>\r\n    ): <div>Loading...</div>;\r\n}\r\n\r\nexport default PDFViewer;","import './PermitTable.scss';\r\nimport { Dispatch, Fragment, SetStateAction, useContext, useEffect, useState } from \"react\";\r\nimport { NavLink, useParams } from \"react-router-dom\";\r\nimport { getPermits } from \"../../services/data-service\";\r\nimport { PermitAPIResponse, PermitTableState } from \"./PermitTableModels\";\r\nimport AgGridTable from '../../Components/AgGridTable/AgGridTable';\r\nimport { createTableStateForSort } from '../../utils/commonMethods';\r\nimport { GlobalStoreState, globalStore } from '../../GlobalStore/GlobalStore';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport CustomTooltip from '../../Components/CustomTooltip/CustomTooltip';\r\nimport NotifierPopIn from '../../Components/NotifierPopIn/NotifierPopIn';\r\n\r\nfunction PermitTable () {\r\n\r\n    const { facilityId } = useParams<{facilityId: string}>();\r\n\r\n    const [tableData, setTableData]: [PermitTableState, Dispatch<SetStateAction<PermitTableState>>]\r\n    = useState<PermitTableState>({\r\n        tableWidth: '96.6vw',\r\n        permitType: 'permit',\r\n        colDefConfig: {},\r\n        rowData: [],\r\n        sortFilterState: {\r\n            criteria: 'permitNumber',\r\n            page: 0,\r\n            state: 'ASC',\r\n            search: ''\r\n        },\r\n        rowHeight: 100\r\n    });\r\n\r\n    const globalState: GlobalStoreState = useContext<GlobalStoreState>(globalStore);\r\n    const { dispatch } = globalState;\r\n\r\n    useEffect(() => {\r\n\r\n        // dispatch([{type: 'tableLoading', data: true}]);\r\n        dispatch([{type: 'isLoading', data: true}])\r\n\r\n        getPermits(facilityId, tableData.sortFilterState).then((res: PermitAPIResponse) => {\r\n            // console.log('Permit Res', res);\r\n            setTableData((prev: PermitTableState) => ({\r\n                ...prev,\r\n                colDefConfig: res.columns,\r\n                rowData: [...res.permits]\r\n            }));\r\n\r\n            // dispatch([{type: 'tableLoading', data: false}]);\r\n            dispatch([{type: 'isLoading', data: false}])\r\n        })\r\n        .catch(err => {\r\n            console.log('Permit Err', err);\r\n            // dispatch([{type: 'tableLoading', data: false}]);\r\n            dispatch([{type: 'isLoading', data: false}])\r\n        })\r\n    }, [dispatch, facilityId, tableData.sortFilterState])\r\n\r\n    // Method to sort columns and setting sort state\r\n    const sort = (criteria: string): void => {\r\n        setTableData(createTableStateForSort(criteria, tableData) as PermitTableState);\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <div className=\"permit-table-wrapper\">\r\n                <div className=\"table-container\">\r\n                    <CustomTooltip title=\"Back\">\r\n                        <NavLink to='/' className=\"back-btn\">\r\n                            <ChevronLeftIcon/>\r\n                        </NavLink>\r\n                    </CustomTooltip>\r\n                    <div className=\"table-title\">Permits</div>\r\n                    {\r\n                        // globalState.state.tableLoading ?\r\n                        // <AgGridSkeletonTable columnSize={14} groupColumnIndex={[7, 8]}/> :\r\n                        tableData.rowData.length ?\r\n                        <div>\r\n                            <AgGridTable {...tableData} sort={sort}/>\r\n                        </div>\r\n                        : !globalState.state.isLoading ? <div>No Permit Table Data</div> : null\r\n                    }\r\n                </div>\r\n            </div>\r\n            <NotifierPopIn {...globalState.state.showNotifier}/>\r\n        </Fragment>\r\n    );\r\n}\r\n\r\nexport default PermitTable;","import React, { Fragment, useContext } from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport './App.scss';\r\nimport Loader from './Components/Loader/Loader';\r\nimport { GlobalStoreState, globalStore } from './GlobalStore/GlobalStore';\r\nimport Home from './Views/Home/Home';\r\nimport PDFViewer from './Views/PDFViewer/PDFViewer';\r\nimport PermitTable from './Views/PermitTable/PermitTable';\r\n\r\nfunction App() {\r\n  \r\n  const globalState: GlobalStoreState = useContext<GlobalStoreState>(globalStore);\r\n  // console.log('From App', globalState)\r\n  \r\n  return (\r\n    <Fragment>\r\n\r\n      {globalState.state.isLoading && <Loader/>}\r\n\r\n        <Router>\r\n          <Switch>\r\n            <Route exact path='/' component={Home}></Route>\r\n            <Route exact path='/permits/:facilityId' component={PermitTable}></Route>\r\n            <Route exact path='/pdf/:facilityId/:permitId' component={PDFViewer}></Route>\r\n            <Route exact path='/pdfByFileName/:fileName' component={PDFViewer}></Route>\r\n          </Switch>\r\n      </Router>\r\n\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { GlobalStateProvider } from './GlobalStore/GlobalStore';\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n  <GlobalStateProvider>\r\n    <App />\r\n  </GlobalStateProvider>,\r\n  // </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}